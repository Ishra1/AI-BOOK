---
title: URDF and XACRO
---

# URDF and XACRO

## Learning Outcomes
By the end of this module, you will be able to:
- Understand the purpose and structure of URDF (Unified Robot Description Format).
- Create a simple URDF file to describe a robot's kinematics and visual properties.
- Understand the benefits of XACRO (XML Macros) for simplifying complex URDF files.
- Convert a XACRO file into a URDF file.
- Visualize URDF models in a simulation environment.

## Introduction to URDF

The Unified Robot Description Format (URDF) is an XML format used in ROS to describe all aspects of a robot. This includes its kinematic and dynamic properties, visual appearance, and collision geometry. URDF files are essential for:
-   **Simulation**: Representing the robot in physics simulators like Gazebo.
-   **Visualization**: Displaying the robot in tools like RViz.
-   **Motion Planning**: Providing kinematic and dynamic models for planners like MoveIt.

A URDF file defines a robot as a tree of `link` and `joint` elements. A `link` represents a rigid body (e.g., a robot arm segment, a wheel), while a `joint` defines the kinematic and dynamic properties of the connection between two links (e.g., revolute, prismatic) (Open Robotics, n.d.).

## Basic URDF Structure

A minimal URDF file defines a single link. Here's an example of a simple cube robot:

```xml
<?xml version="1.0"?>
<robot name="simple_cube">
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.1 0.1 0.1"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 0.8 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.1 0.1 0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>
</robot>
```

In this example:
-   `<robot>`: The root element, with a `name` attribute.
-   `<link>`: Defines a rigid body. `base_link` is the primary link.
-   `<visual>`: Describes the visual properties (how the link looks).
    -   `<geometry>`: Defines the shape (here, a box).
    -   `<material>`: Defines the color.
-   `<collision>`: Describes the collision properties (how the link interacts physically).
-   `<inertial>`: Defines the mass and inertia tensor for physics calculations.

## XACRO: Simplifying Complex URDFs

As robots become more complex, URDF files can become very long and repetitive. XACRO (XML Macros) is an XML macro language that allows you to use macros, properties, and mathematical expressions to generate URDF files more efficiently. This significantly reduces duplication and improves readability and maintainability (Open Robotics, n.d.).

### Example XACRO for a two-link arm

Consider a simple two-link arm. Without XACRO, you would repeat link and joint definitions. With XACRO, you can define a macro for a generic link-joint pair.

```xml
<?xml version="1.0"?>
<robot name="two_link_arm" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:property name="PI" value="3.1415926535897931"/>
  <xacro:property name="joint_limit" value="${PI/2}"/>

  <xacro:macro name="arm_segment" params="prefix parent_link child_link origin_xyz origin_rpy">
    <link name="${prefix}_${child_link}">
      <visual>
        <geometry>
          <cylinder radius="0.02" length="0.2"/>
        </geometry>
        <material name="green">
          <color rgba="0 0.8 0 1"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder radius="0.02" length="0.2"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="0.1"/>
        <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
      </inertial>
    </link>

    <joint name="${prefix}_${child_link}_joint" type="revolute">
      <parent link="${parent_link}"/>
      <child link="${prefix}_${child_link}"/>
      <origin xyz="${origin_xyz}" rpy="${origin_rpy}"/>
      <axis xyz="0 0 1"/>
      <limit lower="${-joint_limit}" upper="${joint_limit}" effort="100" velocity="100"/>
    </joint>
  </xacro:macro>

  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.1 0.1 0.05"/>
      </geometry>
      <material name="red">
        <color rgba="0.8 0 0 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.1 0.1 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <xacro:arm_segment prefix="link1" parent_link="base_link" child_link="segment" origin_xyz="0 0 0.125" origin_rpy="0 0 0"/>
  <xacro:arm_segment prefix="link2" parent_link="link1_segment" child_link="segment" origin_xyz="0 0 0.2" origin_rpy="0 0 0"/>

</robot>
```

To convert a XACRO file to a URDF file, you use the `xacro` command-line tool:

```bash
ros2 run xacro xacro --inorder your_robot.xacro > your_robot.urdf
```

## References

Open Robotics. (n.d.). *URDF Overview*. ROS 2 Documentation. Retrieved from https://docs.ros.org/en/foxy/Tutorials/URDF/URDF-Cata.html